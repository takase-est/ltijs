{"version":3,"file":"Request.js","names":["Request","ltiAdvantageLogin","request","platform","state","query","response_type","response_mode","id_token_signed_response_alg","scope","client_id","platformClientId","redirect_uri","target_link_uri","login_hint","nonce","encodeURIComponent","Array","map","_","Math","random","toString","join","prompt","lti_message_hint","lti_deployment_id"],"sources":["../../../src/esm/Utils/Request.js"],"sourcesContent":["/* Handle Requests */\nclass Request {\n  /**\n     * @description Handles the Lti 1.3 initial login flow (OIDC protocol).\n     * @param {object} request - Login request object sent by consumer.\n     * @param {object} platform - Platform Object.\n     * @param {String} state - State parameter, used to validate the response.\n     */\n  static async ltiAdvantageLogin (request, platform, state) {\n    const query = {\n      response_type: 'id_token',\n      response_mode: 'form_post',\n      id_token_signed_response_alg: 'RS256',\n      scope: 'openid',\n      client_id: request.client_id || await platform.platformClientId(),\n      redirect_uri: request.target_link_uri,\n      login_hint: request.login_hint,\n      nonce: encodeURIComponent([...Array(25)].map(_ => (Math.random() * 36 | 0).toString(36)).join``),\n      prompt: 'none',\n      state\n    }\n    if (request.lti_message_hint) query.lti_message_hint = request.lti_message_hint\n    if (request.lti_deployment_id) query.lti_deployment_id = request.lti_deployment_id\n\n    return query\n  }\n}\n\nexport default Request\n"],"mappings":"AAAA;AACA,MAAMA,OAAO,CAAC;EACZ;AACF;AACA;AACA;AACA;AACA;EACE,aAAaC,iBAAiBA,CAAEC,OAAO,EAAEC,QAAQ,EAAEC,KAAK,EAAE;IACxD,MAAMC,KAAK,GAAG;MACZC,aAAa,EAAE,UAAU;MACzBC,aAAa,EAAE,WAAW;MAC1BC,4BAA4B,EAAE,OAAO;MACrCC,KAAK,EAAE,QAAQ;MACfC,SAAS,EAAER,OAAO,CAACQ,SAAS,KAAI,MAAMP,QAAQ,CAACQ,gBAAgB,CAAC,CAAC;MACjEC,YAAY,EAAEV,OAAO,CAACW,eAAe;MACrCC,UAAU,EAAEZ,OAAO,CAACY,UAAU;MAC9BC,KAAK,EAAEC,kBAAkB,CAAC,CAAC,GAAGC,KAAK,CAAC,EAAE,CAAC,CAAC,CAACC,GAAG,CAACC,CAAC,IAAI,CAACC,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,EAAEC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAACC,IAAI,EAAE,CAAC;MAChGC,MAAM,EAAE,MAAM;MACdpB;IACF,CAAC;IACD,IAAIF,OAAO,CAACuB,gBAAgB,EAAEpB,KAAK,CAACoB,gBAAgB,GAAGvB,OAAO,CAACuB,gBAAgB;IAC/E,IAAIvB,OAAO,CAACwB,iBAAiB,EAAErB,KAAK,CAACqB,iBAAiB,GAAGxB,OAAO,CAACwB,iBAAiB;IAElF,OAAOrB,KAAK;EACd;AACF;AAEA,eAAeL,OAAO","ignoreList":[]}